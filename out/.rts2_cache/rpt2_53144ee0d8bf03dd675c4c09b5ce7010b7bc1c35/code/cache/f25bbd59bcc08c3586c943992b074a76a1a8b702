{"code":"import { FM_DI_TOKEN } from '../token';\r\nexport function Inject(token) {\r\n    return function (proto, key, index) {\r\n        const injection = AnnotationTools.get_set_meta_data(FM_DI_TOKEN.param_injection, proto, key, {});\r\n        injection[index] = token;\r\n    };\r\n}\r\nexport function Meta(meta) {\r\n    return function (target) {\r\n        Reflect.defineMetadata(FM_DI_TOKEN.router_meta, meta, target);\r\n    };\r\n}\r\nexport var AnnotationTools;\r\n(function (AnnotationTools) {\r\n    function get_set_meta_data(metaKey, target, key, def) {\r\n        if (!Reflect.hasMetadata(metaKey, target, key)) {\r\n            Reflect.defineMetadata(metaKey, def, target, key);\r\n        }\r\n        return Reflect.getMetadata(metaKey, target, key);\r\n    }\r\n    AnnotationTools.get_set_meta_data = get_set_meta_data;\r\n    function get_param_types(target, key) {\r\n        var _a;\r\n        const inject_token_map = Reflect.getMetadata(FM_DI_TOKEN.param_injection, target, key);\r\n        return (_a = Reflect.getMetadata('design:paramtypes', target, key)) === null || _a === void 0 ? void 0 : _a.map((t, i) => { var _a; return (_a = inject_token_map === null || inject_token_map === void 0 ? void 0 : inject_token_map[i]) !== null && _a !== void 0 ? _a : t; });\r\n    }\r\n    AnnotationTools.get_param_types = get_param_types;\r\n    function create_decorator(processor) {\r\n        return function (options) {\r\n            return function (target) {\r\n                const meta = get_set_meta_data(FM_DI_TOKEN.router_meta, target, undefined, {});\r\n                processor(target, meta, options);\r\n            };\r\n        };\r\n    }\r\n    AnnotationTools.create_decorator = create_decorator;\r\n    function add_handler(proto, desc) {\r\n        var _a;\r\n        (_a = get_set_meta_data(FM_DI_TOKEN.router_handlers, proto, undefined, [])) === null || _a === void 0 ? void 0 : _a.push(desc);\r\n    }\r\n    AnnotationTools.add_handler = add_handler;\r\n    function get_custom_data(target, key) {\r\n        var _a;\r\n        return (_a = Reflect.getMetadata(FM_DI_TOKEN.custom_data, target)) === null || _a === void 0 ? void 0 : _a[key];\r\n    }\r\n    AnnotationTools.get_custom_data = get_custom_data;\r\n    function define_custom_data(target, key, value) {\r\n        const custom_data = get_set_meta_data(FM_DI_TOKEN.custom_data, target, undefined, {});\r\n        if (!custom_data) {\r\n            return false;\r\n        }\r\n        custom_data[key] = value;\r\n        return true;\r\n    }\r\n    AnnotationTools.define_custom_data = define_custom_data;\r\n})(AnnotationTools || (AnnotationTools = {}));\r\n//# sourceMappingURL=annotation.js.map","references":["/Users/caojiahang/代码/tora/src/token.ts","/Users/caojiahang/代码/tora/src/type.ts"],"map":"{\"version\":3,\"file\":\"annotation.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/di/annotation.ts\"],\"names\":[],\"mappings\":\"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\"}"}
